<div id="pf114" class="pf w2 h6" data-page-no="114"><div class="pc pc114 w2 h6"><img class="bi x0 y0 w1 h1" alt="" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA3AAAAU1CAIAAADdzbFlAAAACXBIWXMAABYlAAAWJQFJUiTwAAAVNUlEQVR42u3asVHDQABEUS1zFVCBqqEmSqAOyqAY7E6WhIAQn6QZafxeAQ7WF/y5U9ouAAAw68UEAAAISgAABCUAAIISAABBCQAAghIAAEEJAICgBABAUAIAgKAEAEBQAgAgKAEAEJQAACAoAQAQlAAACEoAAAQlAAAISgAABCUAAIISAABBCQCAoAQAAEEJAICgBABAUAIAICgBAEBQAgAgKAEAEJQAAAhKAAAQlAAACEoAAAQlAACCEgAABCUAAIISAABBCQCAoAQAQFACAICgBABAUAIAICgBABCUAAAgKAEAEJQAAAhKAAAEJQAACEoAAAQlAACCEgAAQQkAAIISAABBCQCAoAQAQFACAICgBABAUAIAICgBABCUAAAISgAAEJQAAAhKAAAEJQAAghIAAAQlAACCEgAAQQkAgKAEAABBCQCAoAQAQFACACAoAQBAUAIAICgBABCUAAAISgAABCUAAAhKAAAEJQAAghIAAEEJAACCEgAAQQkAgKAEAEBQAgCAoAQAQFACACAoAQAQlAAAICgBABCUAAAISgAABCUAAIISAAAEJQAAghIAgAsaJthoff8yAgBc0f3jzQi7cEMJAMAmaWsFAACmuaEEAEBQAgAgKAEAEJQAAAhKAAAQlAAACEoAAAQlAACCEgAABCUAAIISAABBCQCAoAQAAEEJAICgBABAUAIAICgBAEBQAgAgKAEAEJQAAAhKAAAEJQAACEoAAAQlAACCEgAAQQkAAIISAABBCQCAoAQAQFACAICgBABAUAIAICgBABCUAAAgKAEAEJQAAAhKAAAEJQAAghIAAKYNE5xfEiMAwF7aGkFQOvoAwCTXNEfw5A0AgKAEAEBQAgAgKAEAEJQAACAoAQAQlAAACEoAAAQlAAAISgAABCUAAIISAABBCQAAghIAAEEJAICgBABAUAIAgKAEAEBQAgAgKAEAEJQAAAhKAAAQlAAACEoAAAQlAACCEgAABCUAAIISAABBCQCAoAQAAEEJAICgBABAUAIAICgBAEBQAgAgKAEAEJQAAAhKAAAEJQAACEoAAAQlAACCEgAAQQkAAIISAABBCQCAoAQAQFACAICgBABAUAIAICgBABCUAAAgKAEAEJQAAAhKAAAEJQAACEoAAAQlAACCEgAAQQkAgKAEAABBCQCAoAQAQFACACAoAQBAUAIAICgBABCUAAAISgAAEJQAAAhKAAAEJQAAghIAAAQlAACCEgAAQQkAgKAEAEBQAgCAoAQAQFACACAoAQAQlAAAICgBABCUAAAISgAABCUAAAhKAAAEJQAAghIAAEEJAACCEgAAQQkAgKAEAEBQAgAgKAEAQFACACAoAQAQlAAACEoAABCUAAAISgAABCUAAIISAAAEJQAAghIAAEEJAICgBAAAQQkAgKAEAEBQAgAgKAEAQFACACAoAQAQlAAACEoAAAQlAAAISgAABCUAAIISAABBCQAAghIAAEEJAICgBABAUAIAgKAEAEBQAgAgKAEAEJQAACAoAQAQlAAACEoAAAQlAACCEgAABCUAAIISAABBCQCAoAQAAEEJAICgBABAUAIAICgBAEBQAgAgKAEAEJQAAAhKAAAQlAAACEoAAAQlAACCEgAAQQkAAIISAABBCQCAoAQAQFACAICgBABAUAIAICgBABCUAAAgKAEAEJQAAAhKAAAEJQAACEoAAAQlAACCEgAAQQkAAIISAABBCQCAoAQAQFACACAoAQBAUAIAICgBABCUAAAISgAAEJQAAAhKAAAEJQAAghIAAAQlAACCEgAAQQkAgKAEAABBCQCAoAQAQFACACAoAQAQlAAAICgBABCUAAAISgAABCUAAAhKAAAEJQAAghIAAEEJAACCEgAAQQkAgKAEAEBQAgCAoAQAQFACACAoAQAQlAAACEoTAAAgKAEAEJQAAAhKAAAEJQAACEoAAAQlAACCEgAAQQkAAIISAABBCQCAoAQAQFACAICgBABAUAIAICgBABCUAACwLMsyTHAJSYwAAAhKJt1ut3Vd7QAA293vdyPsLm2tAADANN9QAgAgKAEAEJQAAAhKAAAEJQAACEoAAAQlAACCEgAAQQkAAIISAABBCQCAoAQAQFACAICgBABAUAIAICgBABCUAAAgKAEAEJQAAAhKAAAEJQAAghIAAAQlAACCEgAAQQkAgKAEAABBCQCAoAQAQFACACAoAQBAUAIAICgBABCUAAAISgAAEJQAAAhKAAAEJQAAghIAAEEJAACCEgAAQQkAgKAEAEBQAgCAoAQAQFACACAoAQAQlAAAICgBABCUAAAISgAABCUAAAhKAAAEJQAAghIAAEEJAACCEgAAQQkAgKAEAEBQAgAgKAEAQFACACAoAQAQlAAACEoAABCUAAAISgAABCUAAIISAAAEJQAAghIAAEEJAICgBAAAQQkAgKAEAEBQAgAgKAEAEJQAACAoAQAQlAAACEoAAAQlAAAISgAABCUAAKc3THB+SYwAAHtpawRB6egDAJNc0xzBkzcAAIISAABBCQCAoAQAQFACAICgBABAUAIAICgBABCUAAAgKAEAEJQAAAhKAAAEJQAACEoAAAQlAACCEgAAQQkAAIISAABBCQCAoAQAQFACACAoAQBAUAIAICgBABCUAAAISgAAEJQAAAhKAAAEJQAAghIAAAQlAACCEgAAQQkAgKAEAABBCQCAoAQAQFACACAoAQAQlAAAICgBABCUAAAISgAABCUAAAhKAAAEJQAAghIAAEEJAACCEgAAQQkAgKAEAEBQAgCAoAQAQFACACAoAQAQlAAAICgBABCUAAAISgAABCUAAIISAAAEJQAAghIAAEEJAICgBAAAQQkAgKAEAEBQAgAgKAEAQFACACAoAQAQlAAACEoAABCUAAAISgAABCUAAIISAABBCQAAghIAAEEJAICgBABAUAIAgKAEAEBQAgAgKAEAEJQAACAoAQAQlAAACEoAAAQlAAAISgAABCUAAIISAABBCQCAoAQAAEEJAICgBABAUAIAICgBAEBQAgAgKAEAEJQAAAhKAAAQlAAACEoAAAQlAACCEgAABCUAAIISAABBCQCAoAQAAEEJAICgBABAUAIAICgBABCUAAAgKAEAEJQAAAhKAAAEJQAACEoAAAQlAACCEgAAQQkAAIISAABBCQCAoAQAQFACAICgBABAUAIAICgBABCUAAAISgAAEJQAAAhKAAAEJQAAghIAAP5rmOASkhgBADhpqLS1AgAA0zx5AwAgKAEAEJQAAAhKAAAEJQAACEoAAAQlAACCEgAAQQkAAIISAABBCQCAoAQAQFACAICgBABAUAIAICgBABCUAAAgKAEAEJQAAAhKAAAEJQAAghIAAAQlAACCEgAAQQkAgKAEAABBCQCAoAQAQFACACAoAQBAUAIAICgBABCUAAAISgAAEJQAAAhKAAAEJQAAghIAAEEJAACCEgAAQQkAgKAEAEBQAgCAoAQAQFACACAoAQAQlAAAICgBABCUAAAISgAABCUAAAhKAAAEJQAAghIAAEEJAACCEgAAQQkAgKAEAEBQAgAgKAEA4FHDBOeXxAgAsJe2RhCUjj4AMMk1zRE8eQMAICgBABCUAAAISgAABCUAAAhKAAAEJQAAghIAAEEJAACCEgAAQQkAgKAEAEBQAgCAoAQAQFACACAoAQAQlAAAICgBABCUAAAISgAABCUAAIISAAAEJQAAghIAAEEJAICgBAAAQQkAgKAEAEBQAgAgKAEAQFACACAoAQA4n2GCS0hiBADgpKHS1goAAEzz5A0AgKAEAEBQAgAgKAEAEJQAACAoAQAQlAAACEoAAAQlAAAISgAABCUAAIISAABBCQAAghIAAEEJAICgBABAUAIAgKAEAEBQAgAgKAEAEJQAAAhKAAAQlAAACEoAAAQlAACCEgAABCUAAIISAABBCQCAoAQAAEEJAICgBABAUAIAICgBAEBQAgAgKAEAEJQAAAhKAAAEJQAACEoAAAQlAACCEgAAQQkAAIISAABBCQCAoAQAQFACAICgBABAUAIAICgBABCUAAAgKAEAEJQAAAhKAAAEJQAACEoAAAQlAACCEgAAQQkAgKAEAABBCQCAoAQAQFACACAoAQBAUAIAICgBABCUAAAISgAAEJQAAAhKAAAEJQAAghIAAAQlAACCEgAAQQkAgKAEAEBQAgCAoAQAQFACACAoAQAQlAAAICgBABCUAAAISgAABCUAAAhKAAAEJQAAghIAAEEJAACCEgAAQQkAgKAEAEBQAgAgKAEAQFACACAoAQAQlAAACEoAABCUAAAISgAABCUAAIISAAAEJQAAghIAAEEJAICgBAAAQQkAgKAEAEBQAgAgKAEAQFACACAoAQAQlAAACEoAAAQlAAAISgAABCUAAIISAABBCQAAghIAAEEJAICgBABAUAIAgKAEAEBQAgAgKAEAEJQAACAoAQAQlAAACEoAAAQlAACCEgAABCUAAIISAABBCQCAoAQAAEEJAICgBABAUAIAICgBAEBQAgAgKAEAEJQAAAhKAAD4a5gAAEhyxM+2te1TnB//NAAAW3jyBgBAUAIAICgBABCUAAAISgAAEJQAAAhKAAAEJQAAghIAAAQlAACCEgAAQQkAgKAEAABBCQCAoAQAQFACACAoAQBAUAIAICgBABCUAAAISgAABCUAAAhKAAAEJQAAghIAAEEJAACCEgAAQQkAgKAEAEBQAgCAoAQAQFACACAoAQAQlAAAICgBABCUAAAISgAABCUAAIISAAAEJQAAghIAAEEJAICgBAAAQQkAgKAEAEBQAgAgKAEAQFACACAoAQAQlAAACEoAABCUAAAISgAABCUAAIISAAAEJQAAghIAAEEJAICgBABAUAIAgKAEAEBQAgAgKAEAEJQAACAoAQAQlAAACEoAAAQlAAAISgAABCUAAIISAABBCQAAghIAAEEJAICgBABAUAIAICgBAEBQAgAgKAEAEJQAAAhKAAAQlAAACEoAAAQlAACCEgAABCUAAIISAABBCQCAoAQAAEEJAICgBABAUAIAICgBABCUAAAgKAEAEJQAAAhKAAAEJQAACEoAAAQlAACCEgAAQQkAAIISAABBCQCAoAQAQFACAICgBABAUAIAICgBABCUAAAgKAEAEJQAAAhKAAAEJQAAghIAAAQlAACCEgAAQQkAgKAEAABBCQCAoAQAQFACACAoAQBAUAIAICgBABCUAAAISgAAEJQAAAhKAAAEJQAAghIAAEEJAACCEgAAQQkAgKAEAEBQAgCAoAQAQFACACAoAQAQlAAAICgBABCUAAAISgAABCUAAAhKAAAEJQAAghIAAEEJAICgBAAAQQkAgKAEAEBQAgAgKAEAQFACACAoAQAQlAAACEoAABCUAAAISgAABCUAAIISAAAEJQAAghIAAEEJAICgBAAAQQkAgKAEAEBQAgAgKAEAEJQAACAoAQAQlAAACEoAAAQlAAAISgAABCUAAIISAABBCQAAghIAAEEJAICgBABAUAIAgKAEAEBQAgAgKAEAEJQAAAhKAAAQlAAACEoAAAQlAACCEgAABCUAAIISAABBCQCAoAQAAEEJAICgBABAUAIAICgBAEBQAgAgKAEAEJQAAAhKAAAEpQkAABCUAAAISgAABCUAAIISAAAEJQAAghIAAEEJAICgBAAAQQkAgKAEAEBQAgAgKAEAQFACACAoAQAQlAAACEoAABCUAAAISgAABCUAAIISAABBCQAAghIAAEEJAICgBABAUAIAgKAEAEBQAgAgKAEAEJQAACAoAQAQlAAACEoAAAQlAAAISgAABCUAAIISAABBCQCAoAQAAEEJAICgBABAUAIAICgBAEBQAgAgKAEAEJQAAAhKAAAQlAAACEoAAAQlAACCEgAABCUAAIISAABBCQCAoAQAAEEJAICgBABAUAIAICgBABCUAAAgKAEAEJQAAAhKAAAEJQAACEoAAAQlAACCEgAAQQkAAIISAABBCQCAoAQAQFACAICgBABAUAIAICgBABCUAAAISgAAEJQAAAhKAAAEJQAAghIAAAQlAACCEgAAQQkAgKAEAABBCQCAoAQAQFACACAoAQBAUAIAICgBABCUAAAISgAABCUAAAhKAAAEJQAAghIAAEEJAACCEgAAQQkAgKAEAEBQAgCAoAQAQFACACAoAQAQlAAAICgBABCUAAAISgAABCUAAAhKAAAEJQAAghIAAEEJAICgBAAAQQkAgKAEAEBQAgAgKAEAQFACACAoAQAQlAAACEoAABCUAAAISgAABCUAAIISAAAEJQAAghIAAEEJAICgBABAUAIAgKAEAEBQAgAgKAEAEJQAACAoAQAQlAAACEoAAAQlAAAISgAABCUAAIISAABBCQAAghIAAEEJAICgBABAUAIAICgBAEBQAgAgKAEAEJQAAAhKAAAQlAAACEoAAAQlAACCEgAABCUAAIISAABBCQCAoAQAAEEJAICgBABAUAIAICgBAEBQAgAgKAEAEJQAAAhKAAAEJQAACEoAAAQlAACCEgAAQQkAAIISAABBCQCAoAQAQFACAICgBABAUAIAICgBABCUAAAgKAEAEJQAAAhKAAAEJQAAghIAAAQlAACCEgAAQQkAgKAEAABBCQCAoAQAQFACACAoAQBAUAIAICgBABCUAAAISgAAEJQAAAhKAAAEJQAAghIAAEEJAACCEgAAQQkAgKAEAEBQAgCAoAQAQFACACAoAQAQlAAAICgBABCUAAAISgAABCUAAAhKAAAEJQAAghIAAEEJAACCEgAAQQkAgKAEAEBQAgAgKAEAQFACACAoAQAQlAAACEoAABCUAAAISgAABCUAAIISAAAEJQAAghIAAEEJAICgBAAAQQkAgKAEAEBQAgAgKAEAEJQAACAoAQAQlAAACEoAAAQlAAAISgAABCUAAIISAABBCQAAghIAAEEJAICgBABAUAIAgKAEAEBQAgAgKAEAEJQAAAhKEwAAICgBABCUAAAISgAABCUAAAhKAAAEJQAAghIAAEEJAACCEgAAQQkAgKAEAEBQAgCAoAQAQFACACAoAQAQlAAAICgBABCUAAAISgAABCUAAIISAAAEJQAAghIAAEEJAICgBAAAQQkAgKAEAEBQAgAgKAEAQFACACAoAQAQlAAACEoAABCUAAAISgAABCUAAIISAABBCQAAghIAAEEJAICgBADg2YIyvz6/X5MkJgEA4BE/EUA7sNKHTSQAAAAASUVORK5CYII="/><div class="t m0 xac h19 y18c ff9c fsc fc2 sc0 ls21 ws2">270<span class="_ _c5"> </span><span class="ff5c ls10">15<span class="_ _2c"> </span>Additional<span class="_ _d"> </span>T<span class="_ _0"></span>opics</span></div><div class="t m0 x3b h21 y214 ff1e fsc fc2 sc0 ls1f ws2">int<span class="_ _14"> </span><span class="ff5a ls12">sum(</span>int<span class="_ _f"> </span><span class="ff5a">a,<span class="_ _14"> </span></span>int<span class="_ _f"> </span><span class="ff5a">b)<span class="_ _14"> </span>{</span></div><div class="t m0 x3c h21 y2f9 ff5a fsc fc2 sc0 lsb8 ws2">a+<span class="_ _34"></span>=n<span class="_ _34"></span>;b+<span class="_ _34"></span>=n<span class="_ _34"></span>;</div><div class="t m0 x3c h21 y215 ff1e fsc fc2 sc0 ls1f ws2">int<span class="_ _14"> </span><span class="ff5a ls1d">s=0<span class="_ _34"></span>;</span></div><div class="t m0 x3c h21 y47f ff1e fsc fc2 sc0 ls1f ws2">while<span class="_ _14"> </span><span class="ff5a ls12">(a<span class="_ _f"> </span>&lt;=<span class="_ _14"> </span>b)<span class="_ _f"> </span>{</span></div><div class="t m0 xa h21 y216 ff1e fsc fc2 sc0 ls1f ws2">if<span class="_ _14"> </span><span class="ff5a ls20">(a%2<span class="_ _f"> </span>==<span class="_ _14"> </span>1)<span class="_ _f"> </span>s<span class="_ _14"> </span>+=<span class="_ _14"> </span>tree[a++];</span></div><div class="t m0 xa h21 y217 ff1e fsc fc2 sc0 ls1f ws2">if<span class="_ _14"> </span><span class="ff5a ls20">(b%2<span class="_ _f"> </span>==<span class="_ _14"> </span>0)<span class="_ _f"> </span>s<span class="_ _14"> </span>+=<span class="_ _14"> </span>tree[b--];</span></div><div class="t m0 xa h21 y218 ff5a fsc fc2 sc0 ls1d ws2">a/<span class="_ _34"></span>=2<span class="_ _34"></span>;b/<span class="_ _34"></span>=2<span class="_ _34"></span>;</div><div class="t m0 x3c h21 y219 ff5a fsc fc2 sc0 ls6 ws2">}</div><div class="t m0 x3c h21 y21a ff1e fsc fc2 sc0 ls1f ws2">return<span class="_ _14"> </span><span class="ff5a ls27">s;</span></div><div class="t m0 x3b h21 y21b ff5a fsc fc2 sc0 ls6 ws2">}</div><div class="t m0 x35 h15 y923 ff5c fs4 fc2 sc0 lsc ws2">Ho<span class="_ _0"></span>wev<span class="_ _0"></span>er<span class="_ _0"></span>,<span class="_ _6"> </span>in<span class="_ _6"> </span>advanced<span class="_ _d"> </span>segment<span class="_ _6"> </span>trees,<span class="_ _6"> </span>it<span class="_ _6"> </span>is<span class="_ _6"> </span>often<span class="_ _6"> </span>necessary<span class="_ _6"> </span>to<span class="_ _6"> </span>implement<span class="_ _4"> </span>the<span class="_ _6"> </span>oper-</div><div class="t m0 xac h15 y13ab ff5c fs4 fc2 sc0 lsc ws2">ations<span class="_ _6"> </span><span class="ff9a lsd">fr<span class="_ _0"></span>om<span class="_"> </span>top<span class="_"> </span>to<span class="_"> </span>bottom<span class="_"> </span><span class="ff5c ls6">as<span class="_ _4"> </span>follows:</span></span></div><div class="t m0 x3b h21 y2ce9 ff1e fsc fc2 sc0 ls1f ws2">int<span class="_ _14"> </span><span class="ff5a ls12">sum(</span>int<span class="_ _f"> </span><span class="ff5a">a,<span class="_ _14"> </span></span>int<span class="_ _f"> </span><span class="ff5a">b,<span class="_ _14"> </span></span>int<span class="_ _14"> </span><span class="ff5a ls27">k,<span class="_ _f"> </span></span>int<span class="_ _14"> </span><span class="ff5a ls27">x,<span class="_ _f"> </span></span>int<span class="_ _14"> </span><span class="ff5a ls27">y)<span class="_ _14"> </span>{</span></div><div class="t m0 x3c h21 y2cea ff1e fsc fc2 sc0 ls1f ws2">if<span class="_ _14"> </span><span class="ff5a lsb8">(<span class="_ _34"></span>b&lt;x|<span class="_ _34"></span>|a&gt;y<span class="_ _34"></span>)<span class="ff1e ls1f">return<span class="_ _f"> </span><span class="ff5a">0;</span></span></span></div><div class="t m0 x3c h21 y2ceb ff1e fsc fc2 sc0 ls1f ws2">if<span class="_ _14"> </span><span class="ff5a ls2b">(<span class="_ _34"></span>a&lt;<span class="_ _34"></span>=x&amp;<span class="_ _34"></span>&amp;y&lt;<span class="_ _34"></span>=b<span class="_ _34"></span>)<span class="ff1e ls1f">return<span class="_ _f"> </span></span><span class="ls12">tree[k];</span></span></div><div class="t m0 x3c h21 y2cec ff1e fsc fc2 sc0 ls1f ws2">int<span class="_ _14"> </span><span class="ff5a ls1e">d<span class="_ _f"> </span>=<span class="_ _14"> </span>(x+y)/2;</span></div><div class="t m0 x3c h21 y2ced ff1e fsc fc2 sc0 ls1f ws2">return<span class="_ _14"> </span><span class="ff5a ls6">sum(a,b,2*k,x,d)<span class="_ _f"> </span>+<span class="_ _14"> </span>sum(a,b,2*k+1,d+1,y);</span></div><div class="t m0 x3b h21 y2cee ff5a fsc fc2 sc0 ls6 ws2">}</div><div class="t m0 x35 h20 y2cef ff5c fs4 fc2 sc0 lsc ws2">Using<span class="_ _6"> </span>this<span class="_ _4"> </span>function,<span class="_ _6"> </span>we<span class="_ _4"> </span>can<span class="_ _4"> </span>calculate<span class="_ _6"> </span>the<span class="_ _4"> </span>sum<span class="_ _6"> </span>in<span class="_ _4"> </span>a<span class="_ _6"> </span>range<span class="_ _4"> </span><span class="ff9b ls6">[<span class="ff9a">a<span class="_ _5"></span><span class="ff56">,<span class="_ _15"> </span></span>b<span class="_ _5"></span></span>]<span class="_ _6"> </span><span class="ff5c">as<span class="_ _4"> </span>follows:</span></span></div><div class="t m0 x3b h21 y2cf0 ff1e fsc fc2 sc0 ls1f ws2">int<span class="_ _14"> </span><span class="ff5a ls12">s<span class="_ _f"> </span>=<span class="_ _14"> </span>sum(a,b,1,0,n-1);</span></div><div class="t m0 x35 h23 y2cf1 ff5c fs4 fc2 sc0 lse ws2">The<span class="_ _13"> </span>parameter<span class="_ _13"> </span><span class="ff9a ls6">k<span class="_ _a"> </span></span><span class="lsd">indicates<span class="_ _13"> </span>the<span class="_ _13"> </span>current<span class="_ _13"> </span>position<span class="_ _13"> </span>in<span class="_ _13"> </span><span class="ff5a lsc">tree</span><span class="ls17">.<span class="_ _13"> </span>Initially<span class="_ _13"> </span><span class="ff9a ls6">k<span class="_ _9"> </span></span></span></span>equals<span class="_ _13"> </span>1,</div><div class="t m0 xac h20 y2cf2 ff5c fs4 fc2 sc0 lse ws2">because<span class="_ _c"> </span>we<span class="_ _c"> </span>begin<span class="_ _c"> </span>at<span class="_ _3"> </span>the<span class="_ _c"> </span>root<span class="_ _3"> </span>of<span class="_ _c"> </span>the<span class="_ _c"> </span>tree.<span class="_ _3"> </span>The<span class="_ _c"> </span>range<span class="_ _c"> </span><span class="ff9b ls6">[<span class="_ _5"></span><span class="ff9a">x<span class="_ _36"></span><span class="ff56">,<span class="_ _6"> </span></span>y<span class="_ _2a"></span></span>]<span class="_"> </span></span><span class="lsd">corresponds<span class="_ _c"> </span>to<span class="_ _c"> </span><span class="ff9a ls6">k<span class="_ _b"> </span></span><span class="lsc">and<span class="_ _3"> </span>is</span></span></div><div class="t m0 xac h20 y2cf3 ff5c fs4 fc2 sc0 ls17 ws2">initially<span class="_ _4"> </span><span class="ff9b ls6">[<span class="ff5c">0<span class="ff56">,<span class="_ _15"> </span><span class="ff9a">n<span class="_ _4"> </span></span></span></span>−<span class="_ _6"> </span><span class="ff5c">1</span>]</span><span class="lsc">.<span class="_ _4"> </span>When<span class="_ _c"> </span>calculating<span class="_ _4"> </span>the<span class="_ _4"> </span>sum,<span class="_ _c"> </span>if<span class="_ _6"> </span><span class="ff9b ls6">[<span class="_ _5"></span><span class="ff9a">x<span class="_ _36"></span><span class="ff56">,<span class="_ _6"> </span></span>y<span class="_ _2a"></span></span>]<span class="_ _4"> </span><span class="ff5c">is<span class="_ _c"> </span>outside<span class="_ _4"> </span></span>[<span class="ff9a">a<span class="_ _5"></span><span class="ff56">,<span class="_ _15"> </span></span>b</span>]</span><span class="ls130">,t<span class="_ _32"></span>h<span class="_ _a3"></span>es<span class="_ _31"></span>u<span class="_ _32"></span>mi<span class="_ _a3"></span>s</span></span></div><div class="t m0 xac h23 y2cf4 ff5c fs4 fc2 sc0 lsc ws2">0,<span class="_ _4"> </span>and<span class="_ _4"> </span>if<span class="_ _4"> </span><span class="ff9b ls6">[<span class="_ _5"></span><span class="ff9a">x<span class="_ _36"></span><span class="ff56">,<span class="_ _6"> </span></span>y<span class="_ _5"></span></span>]<span class="_ _4"> </span></span><span class="lsd">is<span class="_ _4"> </span>completely<span class="_ _c"> </span>inside<span class="_ _6"> </span><span class="ff9b ls6">[<span class="ff9a">a<span class="_ _2a"></span><span class="ff56">,<span class="_ _2d"> </span></span>b<span class="_ _5"></span></span>]</span></span>,<span class="_ _4"> </span>the<span class="_ _4"> </span>sum<span class="_ _4"> </span>can<span class="_ _c"> </span>be<span class="_ _6"> </span>found<span class="_ _4"> </span>in<span class="_ _c"> </span><span class="ff5a lsd">tree</span><span class="ls198">.I<span class="_ _31"></span>f<span class="ff9b ls6">[<span class="_ _5"></span><span class="ff9a">x<span class="_ _36"></span><span class="ff56">,<span class="_ _6"> </span></span>y<span class="_ _5"></span></span>]</span></span></div><div class="t m0 xac h20 y2cf5 ff5c fs4 fc2 sc0 ls6 ws2">is<span class="_ _6"> </span>partially<span class="_ _6"> </span>inside<span class="_ _6"> </span><span class="ff9b">[<span class="ff9a">a<span class="_ _2a"></span><span class="ff56">,<span class="_ _15"> </span></span>b</span>]</span><span class="lsd">,<span class="_ _4"> </span>the<span class="_ _6"> </span>search<span class="_ _6"> </span>continues<span class="_ _6"> </span>recursively<span class="_ _d"> </span>to<span class="_ _4"> </span>the<span class="_ _6"> </span>left<span class="_ _6"> </span>and<span class="_ _6"> </span>right<span class="_ _4"> </span>half<span class="_ _6"> </span>of</span></div><div class="t m0 xac h20 y2cf6 ff9b fs4 fc2 sc0 ls6 ws2">[<span class="_ _5"></span><span class="ff9a">x<span class="_ _2a"></span><span class="ff56">,<span class="_ _6"> </span></span>y<span class="_ _2a"></span></span>]<span class="ff5c lsd">.<span class="_ _4"> </span>The<span class="_ _6"> </span>left<span class="_ _4"> </span>half<span class="_ _6"> </span>is<span class="_ _4"> </span></span>[<span class="_ _5"></span><span class="ff9a">x<span class="_ _36"></span><span class="ff56">,<span class="_ _2d"> </span></span>d<span class="_ _36"></span></span>]<span class="ff5c lse">,<span class="_ _6"> </span>and<span class="_ _4"> </span>the<span class="_ _6"> </span>right<span class="_ _4"> </span>half<span class="_ _4"> </span>is<span class="_ _6"> </span></span>[<span class="ff9a">d<span class="_ _c"> </span></span>+<span class="_ _6"> </span><span class="ff5c">1<span class="ff56">,<span class="_ _d"> </span><span class="ff9a">y<span class="_ _2a"></span></span></span></span>]<span class="_ _4"> </span><span class="ff5c lsc">where<span class="_ _6"> </span></span><span class="ff9a">d<span class="_ _b"> </span></span><span class="ls37">=</span></div><div class="t m0 x143 h25 y2cf7 ff9a fs10 fc2 sc0 ls6 ws2">x<span class="_ _2a"></span><span class="ff9b">+<span class="_ _5"></span></span>y</div><div class="t m0 x15d h1b y2cf8 ff5c fs10 fc2 sc0 ls6 ws2">2</div><div class="t m0 x202 h20 y2cf9 ff9b fs4 fc2 sc0 ls6 ws2"><span class="ff5c">.</span></div><div class="t m0 x35 h15 y2cfa ff5c fs4 fc2 sc0 lsd ws2">Figure<span class="_ _20"> </span><span class="fc3 lsc">15.9<span class="_ _f"> </span><span class="fc2">shows<span class="_ _f"> </span>ho<span class="_ _0"></span>w<span class="_ _f"> </span>the<span class="_ _f"> </span>search<span class="_ _21"> </span>proceeds<span class="_ _f"> </span>when<span class="_ _f"> </span>calculating<span class="_ _f"> </span>the<span class="_ _f"> </span>value<span class="_ _f"> </span>of</span></span></div><div class="t m0 xac h23 y2cfb ff5a fs4 fc2 sc0 lsc ws2">sum</div><div class="t m0 xc6 h29 y2cfc ff9a fs10 fc2 sc0 ls6 ws2">q</div><div class="t m0 x18f h15 y2cfd ff56 fs4 fc2 sc0 ls6 ws2">(<span class="ff9a">a<span class="_ _5"></span></span>,<span class="_ _15"> </span><span class="ff9a">b<span class="_ _5"></span></span>)<span class="ff5c lsc">.<span class="_ _4"> </span>The<span class="_ _c"> </span>gray<span class="_ _c"> </span>nodes<span class="_ _4"> </span>indicate<span class="_ _c"> </span>nodes<span class="_ _c"> </span>where<span class="_ _4"> </span>the<span class="_ _c"> </span>recursion<span class="_ _c"> </span>stops<span class="_ _4"> </span>and<span class="_ _c"> </span>the<span class="_ _c"> </span>sum</span></div><div class="t m0 xac h23 y2cfe ff5c fs4 fc2 sc0 lsc ws2">can<span class="_ _4"> </span>be<span class="_ _6"> </span>found<span class="_ _4"> </span>in<span class="_ _4"> </span><span class="ff5a">tree</span>.<span class="_ _4"> </span>Also<span class="_ _4"> </span>in<span class="_ _4"> </span>this<span class="_ _4"> </span>implementation,<span class="_ _4"> </span>operations<span class="_ _6"> </span>take<span class="_ _3"> </span><span class="ff9a ls6">O<span class="_ _2a"></span><span class="ff56">(</span></span><span class="lsd">log<span class="_ _15"> </span><span class="ff9a ls6">n<span class="_ _2a"></span><span class="ff56">)<span class="_ _6"> </span></span></span>time,</span></div><div class="t m0 xac h15 y2cff ff5c fs4 fc2 sc0 lsc ws2">because<span class="_ _6"> </span>the<span class="_ _4"> </span>total<span class="_ _6"> </span>number<span class="_ _4"> </span>of<span class="_ _4"> </span>visited<span class="_ _6"> </span>nodes<span class="_ _4"> </span>is<span class="_ _c"> </span><span class="ff9a ls6">O<span class="_ _2a"></span><span class="ff56">(<span class="_"> </span></span></span><span class="lsd">log<span class="_ _15"> </span><span class="ff9a ls6">n<span class="_ _2a"></span><span class="ff56">)<span class="ff5c">.</span></span></span></span></div><div class="t m0 xac h35 y2d00 ff99 fsf fc2 sc0 ls16 ws2">15.2.1<span class="_ _2f"> </span>Lazy<span class="_ _6"> </span>Propagation</div><div class="t m0 xac h15 y2d01 ff5c fs4 fc2 sc0 ls6 ws2">Using<span class="_ _15"> </span><span class="ff9a lsc">lazy<span class="_ _15"> </span>pr<span class="_ _0"></span>opagation<span class="ff5c lsd">,<span class="_ _15"> </span>we<span class="_ _15"> </span>can<span class="_ _d"> </span>build<span class="_ _2d"> </span>a<span class="_ _d"> </span>segment<span class="_ _2d"> </span>tree<span class="_ _d"> </span>that<span class="_ _15"> </span>supports<span class="_ _15"> </span></span>both<span class="_ _d"> </span><span class="ff5c lse">range<span class="_ _d"> </span>updates</span></span></div><div class="t m0 xac h15 y2d02 ff5c fs4 fc2 sc0 lse ws2">and<span class="_ _d"> </span>range<span class="_ _6"> </span>queries<span class="_ _6"> </span>in<span class="_ _c"> </span><span class="ff9a ls6">O<span class="_ _2a"></span><span class="ff56">(</span></span><span class="lsd">log<span class="_ _2d"> </span><span class="ff9a ls6">n<span class="_ _2a"></span><span class="ff56">)<span class="_ _6"> </span></span></span><span class="lsc">time.<span class="_ _d"> </span>The<span class="_ _6"> </span>idea<span class="_ _6"> </span>is<span class="_ _6"> </span>to<span class="_ _d"> </span>perform<span class="_ _6"> </span>updates<span class="_ _6"> </span>and<span class="_ _6"> </span>queries<span class="_ _d"> </span>from</span></span></div><div class="t m0 xac h15 y2d03 ff5c fs4 fc2 sc0 lsc ws2">top<span class="_ _4"> </span>to<span class="_ _4"> </span>bottom<span class="_ _c"> </span>and<span class="_ _4"> </span>perform<span class="_ _4"> </span>updates<span class="_ _4"> </span><span class="ff9a ls17">lazily<span class="_ _c"> </span></span>so<span class="_ _4"> </span>that<span class="_ _4"> </span>they<span class="_ _4"> </span>are<span class="_ _4"> </span>propagated<span class="_ _4"> </span>down<span class="_ _4"> </span>the<span class="_ _4"> </span>tree</div><div class="t m0 xac h15 y2d04 ff5c fs4 fc2 sc0 lsd ws2">only<span class="_ _6"> </span>when<span class="_ _4"> </span>it<span class="_ _6"> </span>is<span class="_ _4"> </span>necessary<span class="_ _16"></span>.</div><div class="t m0 x35 h15 y2d05 ff5c fs4 fc2 sc0 lsc ws2">The<span class="_ _c"> </span>nodes<span class="_ _3"> </span>of<span class="_ _3"> </span>a<span class="_ _3"> </span>lazy<span class="_ _c"> </span>segment<span class="_ _3"> </span>tree<span class="_ _c"> </span>contain<span class="_ _3"> </span>two<span class="_ _c"> </span>types<span class="_ _3"> </span>of<span class="_ _3"> </span>information.<span class="_ _c"> </span>Like<span class="_ _3"> </span>in<span class="_ _c"> </span>an</div><div class="t m0 xac h15 y2d06 ff5c fs4 fc2 sc0 lsc ws2">ordinary<span class="_ _4"> </span>segment<span class="_ _4"> </span>tree,<span class="_ _4"> </span>each<span class="_ _c"> </span>node<span class="_ _4"> </span>contains<span class="_ _4"> </span>the<span class="_ _c"> </span>sum,<span class="_ _4"> </span>minimum<span class="_ _4"> </span>value,<span class="_ _4"> </span>or<span class="_ _4"> </span>some<span class="_ _4"> </span>other</div><div class="t m0 xac h15 y2d07 ff5c fs4 fc2 sc0 lsc ws2">v<span class="_ _0"></span>alues<span class="_ _3"> </span>related<span class="_ _b"> </span>to<span class="_ _3"> </span>the<span class="_ _3"> </span>corresponding<span class="_ _b"> </span>subarray<span class="_ _16"></span>.<span class="_ _3"> </span>In<span class="_ _3"> </span>addition,<span class="_ _b"> </span>a<span class="_ _3"> </span>node<span class="_ _3"> </span>may<span class="_ _b"> </span>contain<span class="_ _3"> </span>in-</div><a class="l" href="#pf115" data-dest-detail='[277,"XYZ",89,454,null]'><div class="d m1" style="border-style:none;position:absolute;left:207.610425px;bottom:539.195805px;width:19.416000px;height:8.796000px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[2.275981,0.000000,0.000000,2.275981,0.000000,0.000000]}'></div></div>
